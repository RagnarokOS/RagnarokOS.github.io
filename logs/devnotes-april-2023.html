<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8"/>
		<meta name="author" content="Ragnarok">
		<meta name="description" content="A Unix-like operating system based on the Linux Kernel">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="shortcut icon" href="../icon.png" type="image/x-icon">
		<link rel="canonical" href="https://RagnarokOS.github.io/">
		<link rel="stylesheet" href="../css/logs.css" type="text/css" media="all">
		<title>Ragnarok | Simple, Unix-like and secure by default</title>
	</head>
<body>
<pre class="logs">
Ragnarok Development Notes
==========================

[2023-04-17]

* The "bsd-like" rc scripts[1] for the init system is done, for now. The
initial work is finished, but the implementation is not yet complete.
The boot process has been, and continues to be, tested thoroughly,
thanks to booting/rebooting VMs multiple times a day, and so far so
good, no issue has popped up. It'll continue to be perfected over time.
What requires more testing is the rcctl[2] utility.

Rewriting the Debian-provided init scripts is being strongly considered,
especially since some of them have faulty status report. Meaning that
running the "/etc/init.d/<i>script-name</i> status" command will result
and a wrong return value, often claiming that the service is running even
if it's not (examples of such service scripts: opensmtpd and schroot).

Rewriting all the scripts (with proper status return in mind) will not
only fix that issue, but will also simplify rcctl's status check function[3]
and remove the hard dependency on Debian's sysvinit implementation. This
will allow Ragnarok's rc to be used with any other simple init systems,
such as Suckless init[4].

Of course, the utlimate goal is to write Ragnarok's own /sbin/init, but
let's not get ahead of ourselves.

* The base-files package has been moved to its own repository[5]. The
way it was handled through ports, by fetching the source from Debian
and applying a patch with Ragnarok modifications, was a pretty dumb
idea that only made maintenance a pain in the ass.

* Add oksh[6] and hardened_malloc[7] to the list of packages that now have
their own repositories. That was always the plan since package source
code should not be hosting in ports.

[1] https://github.com/RagnarokOS/init
[2] https://github.com/RagnarokOS/init/blob/master/usr/bin/rcctl
[3] https://github.com/RagnarokOS/init/blob/master/usr/bin/rcctl#L112
[4] https://core.suckless.org/sinit/
[5] https://github.com/RagnarokOS/base-files
[6] https://github.com/RagnarokOS/oksh
[7] https://github.com/RagnarokOS/hardened-malloc

[2023-04-03]

* The dummy packages built with equivs have been moved to the ports tree.
There's no point in having it in a separate repository.

* The ports system is being improved significantly. The "r-build" files
will no longer be executable scripts and will only contain functions
passed to mkpkg at build time. This is the right way of doing it.

* The testing of openrc/openrc-init didn't last long since a system upgrade
pretty much borked it. Either way, I really wanted to do a bsd-style sysv
implementation so it was the perfect excuse to do just that.

In fact, the bsd-style init scripts are finished, tested, and confirmed to
work wonderfully (and boots slightly faster, if that matters) and what
remains to be done is finish the control script to start/restart/stop/
enable/disable init scripts.

However, this init style will probably not be part of Ragnarok's first stable
release, since it should be more thoroughly tested with multiple setups before
including it.

</pre>
</body>
</html>
