<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../mandoc.css" type="text/css" media="all"/>
  <title>RAGNAROK-LIVE(8)</title>
</head>
<body>
<div class="head" role="doc-pageheader" aria-label="Manual header
  line"><span class="head-ltitle">RAGNAROK-LIVE(8)</span>
  <span class="head-vol">System Manager's Manual</span>
  <span class="head-rtitle">RAGNAROK-LIVE(8)</span></div>
<main class="manual-text">
<section class="Sh">
<h2 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h2>
<p class="Pp"><code class="Nm">ragnarok-live</code> &#x2014;
    <span class="Nd" role="doc-subtitle">information related to the Ragnarok
    live system</span></p>
</section>
<section class="Sh">
<h2 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h2>
<p class="Pp">This document attempts to give as much information as possible
    about Ragnarok's live environment. The idea is to give a quick rundown of
    the tools available by default so that users can get familiar with the
    system in the most straightforward fashion.</p>
</section>
<section class="Sh">
<h2 class="Sh" id="X_SESSION"><a class="permalink" href="#X_SESSION">X
  SESSION</a></h2>
<section class="Ss">
<h3 class="Ss" id="Starting_an_Xsession"><a class="permalink" href="#Starting_an_Xsession">Starting
  an Xsession</a></h3>
<p class="Pp">If not done already, you can start X11 by issuing the
    <a class="Xr" aria-label="startx, section 1">startx(1)</a> command.</p>
</section>
<section class="Ss">
<h3 class="Ss" id="Window_Manager"><a class="permalink" href="#Window_Manager">Window
  Manager</a></h3>
<p class="Pp">Ragnarok includes two window managers: a fork of Suckless'
    <a class="Xr" aria-label="dwm, section 1">dwm(1)</a>, which is the default
    when logging into X, and <a class="Xr" aria-label="cwm, section
    1">cwm(1)</a>, from the OpenBSD project. Using cwm is as simple as changing
    the WM variable in <span class="Pa">~/.xinitrc</span> from &quot;dwm&quot;
    to &quot;cwm&quot; and (re)starting X.</p>
</section>
<section class="Ss">
<h3 class="Ss" id="dwm"><a class="permalink" href="#dwm">dwm</a></h3>
<p class="Pp">The version of <a class="Xr" aria-label="dwm, section
    1">dwm(1)</a> included has been patched to add the bottomstack, leftstack
    and deck layouts. It also includes gaps in all layouts (including monocle).
    Layouts can be set per tag and an option to increase/decrease the height of
    the bar is also available.</p>
<p class="Pp">This version of dwm does not support launching applications via
    keybindings set in its config file (see the
    <a class="Sx" href="#Keyboard_Shortcuts">Keyboard Shortcuts</a> section for
    more details), only window and tag manipulations get handled by the window
    manager's internal keyboard shortcuts. For a list of keybindings supported
    by the window manager, see either the
    <span class="Pa">/usr/src/dwm/config.h</span> file, or hit the alt+shift+?
    keyboard shortcut to display the list in vim.</p>
<p class="Pp">Basic system information (memory usage, cpu load, network
    connection status, volume level and date/time) is displayed to the right
    inside the status bar. This information is set by the
    <span class="Pa">/usr/local/bin/statusbar.sh</span> script.</p>
</section>
<section class="Ss">
<h3 class="Ss" id="cwm"><a class="permalink" href="#cwm">cwm</a></h3>
<p class="Pp">Calm Window Manager, from the OpenBSD project, is also available
    in the base system. The live environment includes a custom
    <span class="Pa">~/.cwmrc</span> config file, and a status bar is drawn at
    the top of the screen, using a custom script (
    <span class="Pa">/usr/local/bin/cwmbar</span> ) piped to
    <a class="Xr" aria-label="lemonbar, section 1">lemonbar(1)</a>.</p>
<p class="Pp">Much like dwm, cwm's config file does not set keyboard shortcuts
    to open applications, only for window and group manipulation. Available
    keybindings for cwm can be viewed in .cwmrc or by hitting the alt+shift+?
    keyboard shortcut.</p>
</section>
<section class="Ss">
<h3 class="Ss" id="Terminal_Emulator"><a class="permalink" href="#Terminal_Emulator">Terminal
  Emulator</a></h3>
<p class="Pp">The default terminal in Ragnarok is <a class="Xr" aria-label="rt,
    section 1">rt(1)</a>, a lightly patched fork of Suckless' st. Since it is
    meant to provide a minimal terminal for <a class="Xr" aria-label="tmux,
    section 1">tmux(1)</a>, rt does not come with much features, since tmux
    already provides them. The two patches applied are for cosmetic purposes,
    allowing a transparent background and configuration through the
    <span class="Pa">~/.Xresources</span> file.</p>
<p class="Pp"><a class="Xr" aria-label="xterm, section 1">xterm(1)</a> is also
    provided, with it's own theming in Xresources.</p>
</section>
<section class="Ss">
<h3 class="Ss" id="Keyboard_Shortcuts"><a class="permalink" href="#Keyboard_Shortcuts">Keyboard
  Shortcuts</a></h3>
<p class="Pp">The <a class="Xr" aria-label="sxhkd, section 1">sxhkd(1)</a>
    program is provided with a set of default keybindings to open programs in
    <span class="Pa">~/.config/sxhkd/sxhkdrc</span>. This means that all
    program-related shortcuts will work regardless of the window manager being
    used.</p>
</section>
<section class="Ss">
<h3 class="Ss" id="Extra_Software"><a class="permalink" href="#Extra_Software">Extra
  Software</a></h3>
<p class="Pp">The live iso also provides all other programs included in
    Ragnarok's X11 package set: <a class="Xr" aria-label="xcompmgr, section
    1">xcompmgr(1)</a>, <a class="Xr" aria-label="xclip, section
    1">xclip(1)</a>, <a class="Xr" aria-label="xwallpaper, section
    1">xwallpaper(1)</a>, <a class="Xr" aria-label="dunst, section
    1">dunst(1)</a>.</p>
<p class="Pp">Many programs not available in a standard Ragnarok base system are
    also added for a more complete experience, among them:
    <a class="Xr" aria-label="firefox-esr, section 1">firefox-esr(1)</a>,
    <a class="Xr" aria-label="vifm, section 1">vifm(1)</a>,
    <a class="Xr" aria-label="mpv, section 1">mpv(1)</a>,
    <a class="Xr" aria-label="nsxiv, section 1">nsxiv(1)</a>,
    <a class="Xr" aria-label="scrot, section 1">scrot(1)</a>.</p>
</section>
</section>
<section class="Sh">
<h2 class="Sh" id="SYSTEM_ADMINISTRATION"><a class="permalink" href="#SYSTEM_ADMINISTRATION">SYSTEM
  ADMINISTRATION</a></h2>
<p class="Pp">Since this is a live system, there isn't much in the way of system
    administration. However, a few things may be of interest.</p>
<section class="Ss">
<h3 class="Ss" id="Networking"><a class="permalink" href="#Networking">Networking</a></h3>
<p class="Pp">Wired network connections should be properly set at boot time, but
    wireless networks will have to be configured manually. The Ragnarok live iso
    includes a small script to quickly setup an interface file to use with
    <a class="Xr" aria-label="wpasupplicant, section 1">wpasupplicant(1)</a>,
    called <span class="Pa">addwifi</span>. With root privileges, simply run the
    command:</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li">doas addwifi.sh</code></div>
<p class="Pp">and answer the questions. After completion, the interface file
    will be located in
    <span class="Pa">/etc/network/interfaces.d/&lt;interface-name&gt;</span>.
    For security reasons, the file can only be read with root privileges.
    Afterwards, you can connect to the network using the ifup command:</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li">doas ifup
  &lt;interface-name&gt;</code></div>
</section>
<section class="Ss">
<h3 class="Ss" id="security_updates"><a class="permalink" href="#security_updates">security
  updates</a></h3>
<p class="Pp">The live iso is rebuilt whenever the kernel receives a security
    update. However, other programs may have been updated since the iso's
    release and should still be updated even if running a live system
    (particularly web browsers). It is important to run the
    <a class="Xr" aria-label="sysupdate, section 8">sysupdate(8)</a> command to
    update the base system, as well as apt-update &amp;&amp; apt-updrade as soon
    as an internet connection is established.</p>
</section>
<section class="Ss">
<h3 class="Ss" id="hardened_malloc"><a class="permalink" href="#hardened_malloc">hardened
  malloc</a></h3>
<p class="Pp">Ragnarok uses GrapheneOS' hardened memory allocator for extra
    security and provides three different variants: strong, medium and light,
    each providing different levels of protection. By its nature,
    hardened-malloc may cause performance loss under certain conditions, which
    is why it is compiled at boot time using the -march=native flag, which helps
    reducing its impact.</p>
<p class="Pp">The live system uses the light variant by default, but can be
    switched easily by first changing the variant in
    <span class="Pa">/etc/default/hardened_malloc</span> and then running</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li"># rcctl stop
  hardened_malloc</code></div>
<div class="Bd Bd-indent"><code class="Li"># rcctl start
  hardened_malloc</code></div>
<p class="Pp">Note that compiling hardened_malloc at boot time only concerns the
    live system. On installed systems, it would be compiled at system install
    time, and whenever an update is available.</p>
<p class="Pp">hardened_malloc's source code is available on the system at
    <span class="Pa">/usr/lib/hardened_malloc</span>.</p>
</section>
<section class="Ss">
<h3 class="Ss" id="Firewall"><a class="permalink" href="#Firewall">Firewall</a></h3>
<p class="Pp">The base system comes with nftables installed and enabled by
    default, using a sane configuration file which blocks all incoming and
    forwarded connections by default. If one wishes to modify the default
    configuration, then simply edit the
    <span class="Pa">/etc/nftables.conf</span> file and restart the service with
    the following command</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li"># service nftables
  restart</code></div>
</section>
<section class="Ss">
<h3 class="Ss" id="System_mail"><a class="permalink" href="#System_mail">System
  mail</a></h3>
<p class="Pp">You can read system mail by entering the
    <a class="Xr" aria-label="mail, section 1">mail(1)</a> command. Selecting
    the mail to read is done by typing it's number then Return. Quit mail by
    typing q then Return. You can delete read messages by typing d then Return
    before quitting.</p>
</section>
</section>
<section class="Sh">
<h2 class="Sh" id="WEB_BROWSING"><a class="permalink" href="#WEB_BROWSING">WEB
  BROWSING</a></h2>
<p class="Pp">The live system includes Suckless' <a class="Xr" aria-label="surf,
    section 1">surf(1)</a> browser along with a wrapper script called
    <span class="Pa">bro.sh</span>. For details on bro.sh usage, simply enter
    the following command:</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li">$ bro.sh -h</code></div>
<p class="Pp">Note: basic ad blocking for surf is achieved by using Steven
    Black's unified hosts file.</p>
<section class="Ss">
<h3 class="Ss" id="Other_browsers"><a class="permalink" href="#Other_browsers">Other
  browsers</a></h3>
<p class="Pp">Surf is only recommended as a web page viewer rather than as a
    full fledged web browser. Any browser available in Debian can also be
    installed via <a class="Xr" aria-label="apt-get, section
  1">apt-get(1)</a>.</p>
</section>
</section>
<section class="Sh">
<h2 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h2>
<p class="Pp"><a class="Xr" aria-label="sysupdate, section
  8">sysupdate(8)</a></p>
</section>
</main>
<div class="foot" role="doc-pagefooter" aria-label="Manual footer
  line"><span class="foot-left"></span><span class="foot-date">June 7,
  2023</span> <span class="foot-os">Ragnarok</span></div>
</body>
</html>
